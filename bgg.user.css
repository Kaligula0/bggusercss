/* ==UserStyle==
@name           BGG UI Customizer
@description    Easy customization of BGG's UI with user.css
@namespace      https://github.com/yzemaze/bggusercss/
@supportURL     https://www.boardgamegeek.com/thread/2009167/bgg-ui-customizer-colors-fonts-dark-theme-hide-con
@version        0.12.2
@author         yzemaze
@license        CC-BY-NC 4.0
@preprocessor stylus

== theme ==
@var    select      pri                 'Theme: primary color'                  ["custom*", "Red", "Pink", "Purple", "Deep-Purple", "Indigo", "Blue", "Light-Blue", "Cyan", "Teal", "Green", "Light-Green", "Lime", "Yellow", "Amber", "Orange", "Deep-Orange", "Brown", "Grey", "Blue-Grey"]
@var    select      val                 '… shade/tint'                          ["dark", "pure hue*", "light"]
@var    select      sec                 '… secondary color'                     ["custom*", "Red", "Pink", "Purple", "Deep-Purple", "Indigo", "Blue", "Light-Blue", "Cyan", "Teal", "Green", "Light-Green", "Lime", "Yellow", "Amber", "Orange", "Deep-Orange", "Brown", "Grey", "Blue-Grey"]

== specials ==
@var    select      logo                'Logo'                                  ["default*", "BGG", "Ernie"]
@var    checkbox    userMenuLeft        'User menu on the left'                 0
@var    checkbox    searchBarLeft       'Search bar left of menus'              0
@var    checkbox    siteSelectorHide    'Hide site selector'                    0
@var    checkbox    editHomepageHide    '… subdomain dropdown / edit homepage'  0
@var    checkbox    announcementHide    '… announcements'                       0
@var    checkbox    contestHide         '… contests'                            0
@var    checkbox    geekpreviewHide     '… geekpreviews (GenCon, Essen etc.)'   0
@var    checkbox    skyscraperHide      '… skyscraper ad'                       0
@var    range       pageWidth           'Max width of page'                     [1550,770,3840,10,"px"]

== front page ==
@var    range       columns             'Front page columns'                    [2,2,5,1]
@var    checkbox    frontpageCondensed  '… less whitespace'                     1
@var    color       fp2nBgColor         '… background of even rows'             #ddd
@var    color       fp2n1BgColor        '… background of odd rows'              #ccc
@var    color       fpLinkColor         '… links'                               #222
@var    color       fplinkVisitedColor  '… links visited'                       #666
@var    select      fpLinkWeight        '… link weight'                         ["bold", "bolder", "lighter", "normal*"]
@var    color       metadataColor       'Post metadata'                         #666
@var    checkbox    metadataInline      '… inline'                              0
@var    checkbox    titleTruncation     '… truncate titles'                     1
@var    checkbox    metadataForumHide   '… hide subforum/blog'                  0
@var    checkbox    metadataAuthorHide  '… hide author'                         0
@var    checkbox    metadataReactionsHide   '… hide reactions'                  0
@var    checkbox    quickbarSticky      'Quickbar etc. sticky'                  1

== fonts ==
@var    range       fontSize            "Font size text"                        [14,6,36,1,"px"]
@var    select      bodyFont            "… body text"                           ["initial", "monospace", "proportional", "sans-serif", "serif", "Proxima-Nova*"]
@var    select      headerFont          "… header, buttons, small text …"       ["initial", "monospace", "proportional", "sans-serif", "serif", "Proxima-Nova*"]

==  background & border colors ==
@var    color       headerBgColor       'Header background'                     #3f3a60
@var    color       bodyBgColor         'Body background'                       #aaa
@var    color       contentBgColor      'Content background'                    #bbb
@var    color       moduleBgColor       'Module background'                     #ccc
@var    color       moduleBorderColor   '… border'                              #999
@var    color       menuBgColor         'Menus, dropdowns etc. background'      #ddd
@var    color       menuBorderColor     '… border'                              #999
@var    color       inputBgColor        'Input background'                      #eee
@var    color       inputBorderColor    '… border'                              #999
@var    color       table2nBgColor      'Tables even rows'                      #ddd
@var    color       table2n1BgColor     '… odd rows'                            #ccc

== text colors ==
@var    color       textColor           'Text'                                  #222
@var    color       linkColor           'Links'                                 #0053b7
@var    color       linkHoverColor      '… hover'                               #c5130e
@var    color       linkSelectedColor   '… selected'                            #fdad2f
@var    color       linkVisitedColor    '… visited'                             #666
@var    select      linkUnderlineStyle  '… underline style'             ["dashed","dotted","double","initial","inherit","none*","solid","wavy"]
@var    color       positiveColor       'Positive values'                       #01ac01
@var    color       alarmColor          'New item, negative values, errors'     #ff5100

== game pages ==
@var    color       gamepageHeaderColor 'Game pages: header text'               #ddd
@var    checkbox    promotedVideoHide   '… hide promoted videos'                0
@var    checkbox    recommendationsHide '… hide recommendations "Fans Also Like"'   0

== geeklists, forum ==
@var    color       articleNewColor     'Article/item new border'               #CE6C6D
@var    color       articleSelectedColor    '… selected border'                 #000AFF

== subscriptions ==
@var    checkbox    nextAlways          'Subscriptions display NEXT when empty' 0
@var    checkbox    nextChange          '… change next new sub icon'            0
@var    text        nextIconUnicode     '… icon (unicode)'                      138         
@var    color       nextIconColor       '… icon'                                #01ac01
@var    range       nextIconSize        '… size'                                [1.5,1,6,0.25,"em"]
==/UserStyle== */

/**
 * google-material-color v1.2.6
 * https://github.com/danlevan/google-material-color
 */
$palette = {
  'Red': {
    '50': #FFEBEE,
    '100': #FFCDD2,
    '200': #EF9A9A,
    '300': #E57373,
    '400': #EF5350,
    '500': #F44336,
    '600': #E53935,
    '700': #D32F2F,
    '800': #C62828,
    '900': #B71C1C,
    'A100': #FF8A80,
    'A200': #FF5252,
    'A400': #FF1744,
    'A700': #D50000,
  },
  'Pink': {
    '50': #FCE4EC,
    '100': #F8BBD0,
    '200': #F48FB1,
    '300': #F06292,
    '400': #EC407A,
    '500': #E91E63,
    '600': #D81B60,
    '700': #C2185B,
    '800': #AD1457,
    '900': #880E4F,
    'A100': #FF80AB,
    'A200': #FF4081,
    'A400': #F50057,
    'A700': #C51162,
  },
  'Purple': {
    '50': #F3E5F5,
    '100': #E1BEE7,
    '200': #CE93D8,
    '300': #BA68C8,
    '400': #AB47BC,
    '500': #9C27B0,
    '600': #8E24AA,
    '700': #7B1FA2,
    '800': #6A1B9A,
    '900': #4A148C,
    'A100': #EA80FC,
    'A200': #E040FB,
    'A400': #D500F9,
    'A700': #AA00FF,
  },
  'Deep-Purple': {
    '50': #EDE7F6,
    '100': #D1C4E9,
    '200': #B39DDB,
    '300': #9575CD,
    '400': #7E57C2,
    '500': #673AB7,
    '600': #5E35B1,
    '700': #512DA8,
    '800': #4527A0,
    '900': #311B92,
    'A100': #B388FF,
    'A200': #7C4DFF,
    'A400': #651FFF,
    'A700': #6200EA,
  },
  'Indigo': {
    '50': #E8EAF6,
    '100': #C5CAE9,
    '200': #9FA8DA,
    '300': #7986CB,
    '400': #5C6BC0,
    '500': #3F51B5,
    '600': #3949AB,
    '700': #303F9F,
    '800': #283593,
    '900': #1A237E,
    'A100': #8C9EFF,
    'A200': #536DFE,
    'A400': #3D5AFE,
    'A700': #304FFE,
  },
  'Blue': {
    '50': #E3F2FD,
    '100': #BBDEFB,
    '200': #90CAF9,
    '300': #64B5F6,
    '400': #42A5F5,
    '500': #2196F3,
    '600': #1E88E5,
    '700': #1976D2,
    '800': #1565C0,
    '900': #0D47A1,
    'A100': #82B1FF,
    'A200': #448AFF,
    'A400': #2979FF,
    'A700': #2962FF,
  },
  'Light-Blue': {
    '50': #E1F5FE,
    '100': #B3E5FC,
    '200': #81D4FA,
    '300': #4FC3F7,
    '400': #29B6F6,
    '500': #03A9F4,
    '600': #039BE5,
    '700': #0288D1,
    '800': #0277BD,
    '900': #01579B,
    'A100': #80D8FF,
    'A200': #40C4FF,
    'A400': #00B0FF,
    'A700': #0091EA,
  },
  'Cyan': {
    '50': #E0F7FA,
    '100': #B2EBF2,
    '200': #80DEEA,
    '300': #4DD0E1,
    '400': #26C6DA,
    '500': #00BCD4,
    '600': #00ACC1,
    '700': #0097A7,
    '800': #00838F,
    '900': #006064,
    'A100': #84FFFF,
    'A200': #18FFFF,
    'A400': #00E5FF,
    'A700': #00B8D4,
  },
  'Teal': {
    '50': #E0F2F1,
    '100': #B2DFDB,
    '200': #80CBC4,
    '300': #4DB6AC,
    '400': #26A69A,
    '500': #009688,
    '600': #00897B,
    '700': #00796B,
    '800': #00695C,
    '900': #004D40,
    'A100': #A7FFEB,
    'A200': #64FFDA,
    'A400': #1DE9B6,
    'A700': #00BFA5,
  },
  'Green': {
    '50': #E8F5E9,
    '100': #C8E6C9,
    '200': #A5D6A7,
    '300': #81C784,
    '400': #66BB6A,
    '500': #4CAF50,
    '600': #43A047,
    '700': #388E3C,
    '800': #2E7D32,
    '900': #1B5E20,
    'A100': #B9F6CA,
    'A200': #69F0AE,
    'A400': #00E676,
    'A700': #00C853,
  },
  'Light-Green': {
    '50': #F1F8E9,
    '100': #DCEDC8,
    '200': #C5E1A5,
    '300': #AED581,
    '400': #9CCC65,
    '500': #8BC34A,
    '600': #7CB342,
    '700': #689F38,
    '800': #558B2F,
    '900': #33691E,
    'A100': #CCFF90,
    'A200': #B2FF59,
    'A400': #76FF03,
    'A700': #64DD17,
  },
  'Lime': {
    '50': #F9FBE7,
    '100': #F0F4C3,
    '200': #E6EE9C,
    '300': #DCE775,
    '400': #D4E157,
    '500': #CDDC39,
    '600': #C0CA33,
    '700': #AFB42B,
    '800': #9E9D24,
    '900': #827717,
    'A100': #F4FF81,
    'A200': #EEFF41,
    'A400': #C6FF00,
    'A700': #AEEA00,
  },
  'Yellow': {
    '50': #FFFDE7,
    '100': #FFF9C4,
    '200': #FFF59D,
    '300': #FFF176,
    '400': #FFEE58,
    '500': #FFEB3B,
    '600': #FDD835,
    '700': #FBC02D,
    '800': #F9A825,
    '900': #F57F17,
    'A100': #FFFF8D,
    'A200': #FFFF00,
    'A400': #FFEA00,
    'A700': #FFD600,
  },
  'Amber': {
    '50': #FFF8E1,
    '100': #FFECB3,
    '200': #FFE082,
    '300': #FFD54F,
    '400': #FFCA28,
    '500': #FFC107,
    '600': #FFB300,
    '700': #FFA000,
    '800': #FF8F00,
    '900': #FF6F00,
    'A100': #FFE57F,
    'A200': #FFD740,
    'A400': #FFC400,
    'A700': #FFAB00,
  },
  'Orange': {
    '50': #FFF3E0,
    '100': #FFE0B2,
    '200': #FFCC80,
    '300': #FFB74D,
    '400': #FFA726,
    '500': #FF9800,
    '600': #FB8C00,
    '700': #F57C00,
    '800': #EF6C00,
    '900': #E65100,
    'A100': #FFD180,
    'A200': #FFAB40,
    'A400': #FF9100,
    'A700': #FF6D00,
  },
  'Deep-Orange': {
    '50': #FBE9E7,
    '100': #FFCCBC,
    '200': #FFAB91,
    '300': #FF8A65,
    '400': #FF7043,
    '500': #FF5722,
    '600': #F4511E,
    '700': #E64A19,
    '800': #D84315,
    '900': #BF360C,
    'A100': #FF9E80,
    'A200': #FF6E40,
    'A400': #FF3D00,
    'A700': #DD2C00,
  },
  'Brown': {
    '50': #EFEBE9,
    '100': #D7CCC8,
    '200': #BCAAA4,
    '300': #A1887F,
    '400': #8D6E63,
    '500': #795548,
    '600': #6D4C41,
    '700': #5D4037,
    '800': #4E342E,
    '900': #3E2723,
  },
  'Grey': {
    '50': #FAFAFA,
    '100': #F5F5F5,
    '200': #EEEEEE,
    '300': #E0E0E0,
    '400': #BDBDBD,
    '500': #9E9E9E,
    '600': #757575,
    '700': #616161,
    '800': #424242,
    '900': #212121,
  },
  'Blue-Grey': {
    '50': #ECEFF1,
    '100': #CFD8DC,
    '200': #B0BEC5,
    '300': #90A4AE,
    '400': #78909C,
    '500': #607D8B,
    '600': #546E7A,
    '700': #455A64,
    '800': #37474F,
    '900': #263238,
  },
  'Black': {
    '500': #000000,
    'text': rgba(0,0,0,0.87),
    'Primary': rgba(0,0,0,0.87),
    'Secondary': rgba(0,0,0,0.54),
    'Icons': rgba(0,0,0,0.38),
    'Disabled': rgba(0,0,0,0.38),
    'Hint': rgba(0,0,0,0.38),
    'Dividers': rgba(0,0,0,0.12),
  },
  'White': {
    '500': #ffffff,
    'text': #ffffff,
    'Primary': #ffffff,
    'Secondary': rgba(255,255,255,0.7),
    'Icons': rgba(255,255,255,0.5),
    'Disabled': rgba(255,255,255,0.5),
    'Hint': rgba(255,255,255,0.5),
    'Dividers': rgba(255,255,255,0.12),
  },
}

$paletteText = {
  'Red': {
    '50': 'Black',
    '100': 'Black',
    '200': 'Black',
    '300': 'Black',
    '400': 'White',
    '500': 'White',
    '600': 'White',
    '700': 'White',
    '800': 'White',
    '900': 'White',
    'A100': 'Black',
    'A200': 'White',
    'A400': 'White',
    'A700': 'White',
  },
  'Pink': {
    '50': 'Black',
    '100': 'Black',
    '200': 'Black',
    '300': 'White',
    '400': 'White',
    '500': 'White',
    '600': 'White',
    '700': 'White',
    '800': 'White',
    '900': 'White',
    'A100': 'Black',
    'A200': 'White',
    'A400': 'White',
    'A700': 'White',
  },
  'Purple': {
    '50': 'Black',
    '100': 'Black',
    '200': 'Black',
    '300': 'White',
    '400': 'White',
    '500': 'White',
    '600': 'White',
    '700': 'White',
    '800': 'White',
    '900': 'White',
    'A100': 'Black',
    'A200': 'White',
    'A400': 'White',
    'A700': 'White',
  },
  'Deep-Purple': {
    '50': 'Black',
    '100': 'Black',
    '200': 'Black',
    '300': 'White',
    '400': 'White',
    '500': 'White',
    '600': 'White',
    '700': 'White',
    '800': 'White',
    '900': 'White',
    'A100': 'Black',
    'A200': 'White',
    'A400': 'White',
    'A700': 'White',
  },
  'Indigo': {
    '50': 'Black',
    '100': 'Black',
    '200': 'Black',
    '300': 'White',
    '400': 'White',
    '500': 'White',
    '600': 'White',
    '700': 'White',
    '800': 'White',
    '900': 'White',
    'A100': 'Black',
    'A200': 'White',
    'A400': 'White',
    'A700': 'White',
  },
  'Blue': {
    '50': 'Black',
    '100': 'Black',
    '200': 'Black',
    '300': 'Black',
    '400': 'Black',
    '500': 'White',
    '600': 'White',
    '700': 'White',
    '800': 'White',
    '900': 'White',
    'A100': 'Black',
    'A200': 'White',
    'A400': 'White',
    'A700': 'White',
  },
  'Light-Blue': {
    '50': 'Black',
    '100': 'Black',
    '200': 'Black',
    '300': 'Black',
    '400': 'Black',
    '500': 'Black',
    '600': 'White',
    '700': 'White',
    '800': 'White',
    '900': 'White',
    'A100': 'Black',
    'A200': 'Black',
    'A400': 'Black',
    'A700': 'White',
  },
  'Cyan': {
    '50': 'Black',
    '100': 'Black',
    '200': 'Black',
    '300': 'Black',
    '400': 'Black',
    '500': 'Black',
    '600': 'Black',
    '700': 'White',
    '800': 'White',
    '900': 'White',
    'A100': 'Black',
    'A200': 'Black',
    'A400': 'Black',
    'A700': 'Black',
  },
  'Teal': {
    '50': 'Black',
    '100': 'Black',
    '200': 'Black',
    '300': 'Black',
    '400': 'Black',
    '500': 'White',
    '600': 'White',
    '700': 'White',
    '800': 'White',
    '900': 'White',
    'A100': 'Black',
    'A200': 'Black',
    'A400': 'Black',
    'A700': 'Black',
  },
  'Green': {
    '50': 'Black',
    '100': 'Black',
    '200': 'Black',
    '300': 'Black',
    '400': 'Black',
    '500': 'Black',
    '600': 'White',
    '700': 'White',
    '800': 'White',
    '900': 'White',
    'A100': 'Black',
    'A200': 'Black',
    'A400': 'Black',
    'A700': 'Black',
  },
  'Light-Green': {
    '50': 'Black',
    '100': 'Black',
    '200': 'Black',
    '300': 'Black',
    '400': 'Black',
    '500': 'Black',
    '600': 'Black',
    '700': 'White',
    '800': 'White',
    '900': 'White',
    'A100': 'Black',
    'A200': 'Black',
    'A400': 'Black',
    'A700': 'Black',
  },
  'Lime': {
    '50': 'Black',
    '100': 'Black',
    '200': 'Black',
    '300': 'Black',
    '400': 'Black',
    '500': 'Black',
    '600': 'Black',
    '700': 'Black',
    '800': 'Black',
    '900': 'White',
    'A100': 'Black',
    'A200': 'Black',
    'A400': 'Black',
    'A700': 'Black',
  },
  'Yellow': {
    '50': 'Black',
    '100': 'Black',
    '200': 'Black',
    '300': 'Black',
    '400': 'Black',
    '500': 'Black',
    '600': 'Black',
    '700': 'Black',
    '800': 'Black',
    '900': 'Black',
    'A100': 'Black',
    'A200': 'Black',
    'A400': 'Black',
    'A700': 'Black',
  },
  'Amber': {
    '50': 'Black',
    '100': 'Black',
    '200': 'Black',
    '300': 'Black',
    '400': 'Black',
    '500': 'Black',
    '600': 'Black',
    '700': 'Black',
    '800': 'Black',
    '900': 'Black',
    'A100': 'Black',
    'A200': 'Black',
    'A400': 'Black',
    'A700': 'Black',
  },
  'Orange': {
    '50': 'Black',
    '100': 'Black',
    '200': 'Black',
    '300': 'Black',
    '400': 'Black',
    '500': 'Black',
    '600': 'Black',
    '700': 'Black',
    '800': 'White',
    '900': 'White',
    'A100': 'Black',
    'A200': 'Black',
    'A400': 'Black',
    'A700': 'Black',
  },
  'Deep-Orange': {
    '50': 'Black',
    '100': 'Black',
    '200': 'Black',
    '300': 'Black',
    '400': 'Black',
    '500': 'White',
    '600': 'White',
    '700': 'White',
    '800': 'White',
    '900': 'White',
    'A100': 'Black',
    'A200': 'Black',
    'A400': 'White',
    'A700': 'White',
  },
  'Brown': {
    '50': 'Black',
    '100': 'Black',
    '200': 'Black',
    '300': 'White',
    '400': 'White',
    '500': 'White',
    '600': 'White',
    '700': 'White',
    '800': 'White',
    '900': 'White',
  },
  'Grey': {
    '50': 'Black',
    '100': 'Black',
    '200': 'Black',
    '300': 'Black',
    '400': 'Black',
    '500': 'Black',
    '600': 'White',
    '700': 'White',
    '800': 'White',
    '900': 'White',
  },
  'Blue-Grey': {
    '50': 'Black',
    '100': 'Black',
    '200': 'Black',
    '300': 'Black',
    '400': 'White',
    '500': 'White',
    '600': 'White',
    '700': 'White',
    '800': 'White',
    '900': 'White',
  },
  'Black': {
    '500': 'White',
    'text': 'White',
    'Primary': 'White',
    'Secondary': 'White',
    'Icons': 'White',
    'Disabled': 'White',
    'Hint': 'White',
    'Dividers': 'White',
  },
  'White': {
    '500': 'Black',
    'text': 'White',
    'Primary': 'Black',
    'Secondary': 'Black',
    'Icons': 'Black',
    'Disabled': 'Black',
    'Hint': 'Black',
    'Dividers': 'Black',
  },
}

palette(color, accent='500')
  return $palette[color][accent]

paletteText(color, accent='500', textAccent='Primary')
  return $palette[$paletteText[color][accent]][textAccent]

/*
Colors
Red, Pink, Purple, Deep Purple, Indigo, Blue, Light Blue, Cyan, Teal, Green, Light Green, Lime, Yellow, Amber, Orange, Deep Orange, Brown, Grey, Blue Grey

Shades (note that not all color have all the shades)
50, 100, 200, 300, 400, 500, 600, 700, 800, 900, 1000, A100, A200, A400, A700

Text Colors
White, Black

Text Shades
Primary, Secondary, Icons, Disabled, Hint, Dividers
*/

/* ===== THEME ===== */
if pri != "custom"
    headerBgColor       = palette(pri, '500')
    bodyBgColor         = palette(pri, '400')
    contentBgColor      = palette(pri, '300')
    moduleBgColor       = palette(pri, '200')
    moduleBorderColor   = palette(pri, '700')
    menuBgColor         = palette(pri, '300')
    menuBorderColor     = palette(pri, '700')
    inputBgColor        = palette(pri, '100')
    inputBorderColor    = palette(pri, '700')
    fp2nBgColor         = palette(pri, '50')
    table2nBgColor      = palette(pri, '50')
    fp2n1BgColor        = palette(pri, '100')
    table2n1BgColor     = palette(pri, '100')
    positiveColor       = palette(pri, '300')
    alarmColor          = palette(pri, '300')
    articleNewColor     = palette(pri, '300')
    articleSelectedColor = palette(pri, '300')
if sec != "custom"
    textColor           = paletteText(sec, '200')
    linkColor           = palette(sec, '900')
    fpLinkColor         = palette(sec, '900')
    linkHoverColor      = palette(sec, '500')
    linkSelectedColor   = palette(sec, '500')
    linkVisitedColor    = lighten(paletteText(sec, '200'), 30)
    fpLinkVisitedColor  = lighten(paletteText(sec, '200'), 30)
/* ===== /theme ===== */

/* ===== VARS ===== */
articleNewBorder = solid 3px articleNewColor
articleSelectedBorder = solid 3px articleSelectedColor
borderRadius = 2px
buttonBgColor = menuBgColor
buttonBorder = menuBorder
buttonHoverBgColor = headerHoverBgColor
buttonHoverColor = headerHoverColor
buttonHoverRadius = borderRadius
fontS = fontM = fontXL = fontXXL = headerFont
fontL = bodyFont
fontSizeXXL = 1.5rem
fontSizeXL = 1.2rem
fontSizeL = 0.875rem // == fontSize set in config
fontSizeM = 0.75rem
fontSizeS = 0.625rem

if dark(headerBgColor)
    headerColor = lighten(headerBgColor, 85%)
    headerHoverBgColor = lighten(headerBgColor, 50%)
    headerHoverColor = darken(headerColor, 90%)
    headerLinkColor = lighten(headerColor, 20%)
else
    headerColor = darken(headerBgColor, 85%)
    headerHoverBgColor = darken(headerBgColor, 50%)
    headerHoverColor = lighten(headerColor, 90%)
    headerLinkColor = darken(headerColor, 20%)

headerHoverRadius = borderRadius
inputBorder = 1px solid inputBorderColor
menuBorder = 1px solid menuBorderColor
moduleBorder = 1px solid moduleBorderColor
quoteTitleBgColor = headerBgColor
quoteTitleColor = headerColor
quoteBorder = moduleBorder

if dark(moduleBgColor)
    quoteBgColor = lighten(moduleBgColor, 10%)
    quoteColor = darken(textColor, 5%)
else
    quoteBgColor = darken(moduleBgColor, 5%)
    quoteColor = lighten(textColor, 5%)
    
/* ===== /vars ===== */

/* ===== FUNCTIONS ===== */
bg(item, args...)
    background-color item + "BgColor" args
    
c(item, args...)
    color item + "Color" args

buttonHoverStyle()
    bg buttonHover
    border-color buttonHoverBgColor
    border-radius buttonHoverRadius
    c buttonHover

headerHoverStyle()
    bg headerHover
    border-color headerHoverBgColor
    border-radius headerHoverRadius
    c headerHover

headerStyle()
    bg header
    c header

inputStyle()
    bg input
    border inputBorder
    border-radius borderRadius
    textStyle()

if linkUnderlineStyle != "none"
    linkStyle()
        text-decoration underline linkUnderlineStyle
else
    linkStyle()
        text-decoration none

textStyle()
    c text

/* ===== /functions ===== */
    
@-moz-document domain("boardgamegeek.com"), domain("bgg.cc"), domain("rpggeek.com"), domain("videogamegeek.com")
    html
        font-family headerFont
        font-size round((fontSize/0.875)) // body text = 0.875rem 
    body
        bg body
        textStyle()
        font-family headerFont
        font-size 0.875rem

    /* ===== NEW PAGES ===== */
    /* === page === */
    .container-fluid
        max-width pageWidth
    if skyscraperHide
        .global-body-ad
            display none
            
    /* === menus === */
    /* dropdowns */
    .dropdown-menu
        bg menu
        border-color menuBorderColor
        a, li a, .dropdown-item a, .dropdown-item a:link, &.show a.dropdown-item, &.show .dropdown-item
            textStyle()
            &:hover, &:visited:hover
                headerHoverStyle()
                linkStyle()
    /* modal dialogs */
    div.modal-content
        bg module
        .list-group-item
            bg menu
    /* popover */
    .popover
        bg menu
        .dropdown-item:hover
            c linkHover
    /* overlay */
    .expandable div.expandable-envelope p.expandable-overlay
        background-image linear-gradient(to bottom, rgba(255, 255, 255, 0), contentBgColor)
        
    /* === text === */
    p, textarea
        textStyle()
        font-family bodyFont
    .text-muted:hover
        textStyle() !important // counter-i!
        filter opacity(100%)
        
    /* === links, buttons === */
    a, button, .link-muted-color
        outline none !important
    a, .link-muted-color
        &:hover
            c linkHover
            linkStyle() 
    a, .nav-tabs-more-dropdown a, .summary-image-item .summary-item-title a, .panel-body-toolbar > a, .advertisement-text-body a, .btn.btn-text-link, .btn.btn-text-link.active, .quickbar-pagination button.btn, .panel-inline-links > a:link:not(.btn), .global-footer-item a, .quickbar-icon, .shortcut-add, .shortcut-remove
        c link
    .link-text:link, .link-text:visited
        textStyle()
    a:visited, .link-text-color:visited
        c linkVisited
    a:hover, .link-text-color:hover
        c linkHover
    .outline.outline-muted a:hover:not(.btn)
        c linkHover
    a.selected
        c linkSelected !important
    a, a:link, a:hover, a.link-text-color:hover, a.link-text:hover
        linkStyle()
    .btn:not(.disabled):not(.btn-empty):not(.btn-xs):not(.btn-primary), .btn-outline-secondary, input[type="button"]
        &:hover
            buttonHoverStyle()  
    .btn-subtle, .btn.btn-default:not(.active):not(:disabled), .btn.btn-default:not(.active):not(:disabled).is-active, .btn.btn-white:not(.active):not(:disabled), .btn.btn-white:not(.active):not(:disabled).is-active
        &:hover
            buttonHoverStyle()
            i
                c buttonHover
                
    /* === inputs, forms === */
    input:not([type="button"]), .form-control, textarea, textarea.form-control[readonly]
        inputStyle()
        &:focus
            bg input
            
    /* === navigation === */
    .nav.nav-tabs > li > a, .nav.nav-tabs .nav-link
        textStyle()
        &:hover
            buttonHoverStyle()  
            
    /* === misc === */
    hr
        border-color moduleBorderColor
    hr+br
        display none
    /* ===== /new pages ===== */

    /* ===== ANGULAR 8 PAGES ===== */
    /* ==== header, file, image & video pages ==== */
    gg-app
        /* ==== header ==== */
        gg-header

            /* === logo === */
            if logo == "Ernie"
                div.menu-logo-inner
                    margin-left 1em
                    a > img
                        width 60px
                        height 45px
                        box-sizing border-box
                        padding-left 60px
                        background url("https://cf.geekdo-static.com/images/geekdo/bgg_cornerlogo.png")
                        background-size contain             

            if logo == "BGG"
                div.menu-logo-inner
                    a > img
                        display none
                     
                    a:first-child:after         
                        content "BGG"
                        c header // #ff5100 
                        font fontXXL
                        font-size 36px
                        font-weight 900             
                gg-menu-logo div.dropdown
                    margin-bottom 15px          

            if siteSelectorHide
                gg-menu-logo div.menu-logo-inner > div.dropdown > button.dropdown-toggle
                    display none !important
                    
            /* === order of menu items === */
            if userMenuLeft
                div.c-nav-primary-wrapper >
                    div.c-nav-primary
                        margin-left 20px
                        order 2
                    div.c-nav-primary-user
                        flex 0
                        margin-left 20px
                        order 1
                /* open user menu to the right */
                div.c-nav-primary-user .dropdown-menu
                    left 217px !important // counter inline transform 
                    right auto !important
            if searchBarLeft
                div.c-inner
                    button
                        order 0
                    gg-menu-logo
                        order 1
                    gg-header-search
                        order 2
                        margin-left 20px
                    div.c-nav
                        order 3
                        div.c-nav-primary div.dropdown-menu.show
                            left auto !important
                            right 0 !important                  
            /* nextAlways doesn’t work */

            /* === colors === */
            > header.header > .container-fluid
                headerStyle()

            /* === sidebar toggle === */
            div.c-inner button.btn.btn-empty.header-icon
                border-radius headerHoverRadius
                padding 0.5em
                path
                    fill headerColor
                &:hover
                    bg headerHover 
                    path
                        fill headerHoverColor
                        
            /* === site selector === */
            gg-menu-logo .menu-logo-inner > .dropdown > button.dropdown-toggle[aria-haspopup="true"]
                c header !important
                border-radius headerHoverRadius
                padding 0.4em 0.5em
                &:hover
                    headerHoverStyle()
                    c headerHover !important // counter-i!
                    
            /* === search === */
            .c-advanced
                bg menu
                textStyle()
                a, select.custom-select
                    c link
                    &:hover
                        headerHoverStyle()
                select.custom-select
                    bg menu
            .c-inner gg-header-search.c-mobile
                headerStyle()           

            /* === geekmail === */
            gg-geekmail-notifications
                border-radius headerHoverRadius
                padding 0.35em 0em
                path
                    fill headerColor
                &:hover
                    bg headerHover
                    path
                        fill headerHoverColor
                        
            /* === subscriptions === */
            gg-subscription-notifications
                a.geekmenu-notification-icon
                    border-radius headerHoverRadius
                    margin-left 0
                    padding 0.35em
                    path
                        fill headerColor
                    span.count
                        transform translate(-5px, 5px)
                    &:hover
                        bg headerHover
                        padding 0.35em
                        path
                            fill headerHoverColor                               
                /* next button */
                a.header-user-notification-next
                    border none
                    border-radius headerHoverRadius
                    c header
                    font-size fontSizeM
                    font-weight 700
                    margin-left 0
                    padding 0.7em 0.3em
                    &:hover
                        headerHoverStyle()
                        path
                            fill headerHoverColor
            
            /* == count badges == */
            .geekmail-notification-icon, .geekmenu-notification-icon span.count
                background-color alarmColor
                if dark(alarmColor)
                    color white
                else
                    color black
                            
            /* === user + menus === */
            li.c-nav-user.dropdown-primary button.dropdown-toggle, div.c-nav-primary-wrapper li.dropdown-primary button.dropdown-toggle
                c header
                border-radius headerHoverRadius
                padding 0.5em
                &:hover, &[aria-expanded="true"]
                    headerHoverStyle()
            /* fix for Angular8 header dropdowns to extend hover range */ // TODO remove
            .dropdown-menu .dropdown-item a
                padding 0.25em 1em
                margin -0.25em -1em
        /* ==== /header ==== */

        /* ==== sidebar ==== */
        if quickbarSticky
            .geeksidebar
                position sticky
                top 70px
        .geeksidebar-section
            .geeksidebar-section-header.toggler-caret
                headerStyle()
                &:hover
                    headerHoverStyle()
            .geeksidebar-section-body
                bg module
                padding 0.2em 0
                .geeksidebar-links > li:not(:last-child)
                    border-color bodyBgColor
                .btn, .quickbar-pagination .btn, .quickbar-header .color-icon
                    c link
                    &:hover
                        c linkHover
                /* row hover */
                div.quickbar-header
                    padding 0 0.5em
                .quickbar-list li
                    min-height 1.7em
                li
                    padding 0.15em 0.5em
                li:hover, li a:hover
                    buttonHoverStyle()
                    
        /* ==== body ==== */
        div.global-body-content, .global-body-content-primary
            bg content
            gg-markup-text
                font-family bodyFont
            
            /* === buttons === */
            .btn-icon, .form-group-search button.search
                c link
            .btn:hover
                buttonHoverStyle()
            .feedback-trigger
                border-radius buttonHoverRadius
            /* thumbs button */     
            .interaction-btn.thumbsup:hover path#thumbsup-outline
                fill positiveColor
            /* geekgold button */
            gg-geekgold gg-reactions-popup-trigger gg-button-geekgold
                .interaction-btn.geekgold:hover path
                    &#coin-background
                        fill #fde538
                    &#coin-outline
                        fill #a37900                
                gg-geekgold-quick-give.dropdown-menu.show
                    bg menu
                    button.dropdown-item:hover
                        headerHoverStyle()
            /* comment buttons */
            ul.comment-actions > li button.comment-btn
                border-radius buttonHoverRadius
                &.active, &:focus, &:hover
                    buttonHoverStyle()
                    
            /* === input === */
            input, textarea, .form-control, textarea.form-control[readonly]
                inputStyle()

            /* === image pages, gallery, file pages, video pages === */
            /* == header == */
            .breadcrumb-row gg-breadcrumbs.c-light-bg
                bg module
                margin 0 // fix different margins 
                > span.c-crumb:first-of-type
                    padding-left 1em            
            .c-container,  gg-image-nav .image-nav, gg-comment
                bg module
                .popover
                    bg menu !important          
            .c-container
                border moduleBorder !important
            gg-markup-quote
                bg quote !important
                border quoteBorder !important
                margin 10px 0
                padding 10px
            .breadcrumb-row .c-light-bg
                .c-crumb:first-of-type, .c-crumb
                    a
                        c link
                        &:hover
                            buttonHoverStyle()
                            margin -2px -4px
                            padding 2px 4px             
            gg-image-nav
                border-color moduleBorderColor
                .image-metadata
                    bg module
                    &:hover
                        textStyle()             
            gg-filepage-caption
                .filepage-metadata
                    border-color moduleBorderColor
                    gg-license-editable
                        bg module !important
                        &:hover
                            textStyle()         
            .caption-block .gallery-meta a.edit-btn:hover fa-icon.ng-fa-icon
                c linkHover
            .media-sidebar
                bg module
                border moduleBorder
                .media-sidebar-actions
                    border-color moduleBorderColor
                    gg-subscription-button, gg-image-size-dropdown, gg-share-buttons
                        .btn
                            border none !important // counter-i!
                            &:hover
                                border-radius buttonHoverRadius !important
                                fa-icon.ng-fa-icon
                                    c buttonHover
                            &.dropdown-toggle.btn-right fa-icon.ng-fa-icon
                                border none
                a, button
                    &.btn-tag
                        background-color buttonBgColor
                        &:hover
                            buttonHoverStyle()
                a.dropdown:hover fa-icon.ng-fa-icon
                     c linkHover
                a.see-all-btn
                    padding 3px 5px
                    &:hover
                        buttonHoverStyle()
                .tag-link-wrapper button.btn-unstyled
                    c link
                    &:hover
                        buttonHoverStyle()
                        margin -3px -5px
                        padding 3px 5px
                        text-decoration none
            /* button specials … */
            gg-filepage-page, gg-video-page
                .media-sidebar .media-sidebar-actions
                    gg-subscription-button .subscription-btn
                        .btn-block.btn-left
                            margin 0 0.7em 0 1.5em
                            padding 0 1em 0 0 !important // counter-i!
                        .btn-right.dropdown-toggle
                            margin 0 0.3em 0 0.3em
                            padding 0 0 0 0.6em !important // counter-i!
                            fa-icon.ng-fa-icon
                                border none
                    gg-share-buttons .btn
                        margin 0 3em 0 3em
                        padding 0 0 0 0.6em !important // counter-i!
                        
            /* == interaction, file timeline == */
            .caption-footer .interaction-btn-group .interaction-btn
                background-color buttonBgColor
                border buttonBorder
                &:hover
                    c linkHover
            gg-timeline
                bg module
            gg-timeline-item .timeline-data
                border-color moduleBorderColor
                gg-file + gg-file
                    border-color moduleBorderColor                  
                a:hover .file-badge, a:not(.loading) .file-badge:hover
                    buttonHoverStyle()
            .view-all-container
                border-color moduleBorderColor
                &::before
                    box-shadow none
            gg-comments-block .panel
                button.flex-grow-1
                    bg menu
                gg-comment
                    border moduleBorder
                    margin 0.5em 0
                    padding 1em
                    gg-reactions-popup-trigger a
                        padding 4px 8px
                        &:hover
                            buttonHoverStyle()
                            .count, .label
                                c buttonHover
        /* ==== /body ==== */
                
        /* ==== footer ==== */
        div.global-body-content-secondary .geekfooter
            a:hover
                c linkHover
    /* ===== /angular8 pages ===== */

    /* ===== AngularJS PAGES ===== */
    body.ng-scope
        .btn-indigo
            headerStyle()
            border-color headerBgColor
            
        /* ==== header ==== */
        .global-header

            /* === logo === */
            if logo == "Ernie"
                div.global-header-logo
                    margin-left 1em
                    a > img
                        width 60px
                        height 45px
                        box-sizing border-box
                        padding-left 60px
                        background url("https://cf.geekdo-static.com/images/geekdo/bgg_cornerlogo.png")
                        background-size contain
            if logo == "BGG"
                div.global-header-logo
                    a > img
                        display none
                     
                    a:first-child:after         
                        content "BGG"
                        c header // #ff5100 
                        font fontXXL
                        font-size 36px
                        font-weight 900
                    div.dropdown
                        top -8px

            /* === order of menu items === */
            if userMenuLeft
                ul.global-header-nav-primary >
                    for i in (1..6)
                        li:nth-child({i})
                            order 2 + i
                    li:nth-child(1)
                        margin-left 20px
                    li:nth-child(7)
                        order 1
                        margin-left 20px
                    li:nth-child(8)
                        order 2
                /* open menus to the left */
                ul.global-header-nav-primary .dropdown-menu
                    left auto
                    right 0
                /* open user menu to the right */
                li.global-header-nav-user .dropdown-menu
                    left 0
            if searchBarLeft
                div.global-header-nav-primary-wrapper
                    order 2
                div.global-header-nav-search
                    margin-left 20px
                    order 1
                div.global-header-nav-search-advanced ul.dropdown-menu
                    left 0 !important
            if nextAlways
                a.global-header-user-notification-action.ng-hide
                    display initial !important

            /* fix AngularJS header */
            /* TODO remove */
            .global-header-nav-primary .dropdown-menu li a:hover
                c headerHover
                linkStyle()

            /* === colors === */
            headerStyle()
            .global-header-nav-primary .dropdown-toggle, .global-header-nav-primary button.btn, geekmail-notifications a.global-header-icon, subscription-notifications span a, button.global-header-nav-toggle, button.global-header-site-selector, a.global-header-icon.is-active i, button.btn.global-header-icon.is-active i, .btn.btn-empty.global-header-icon.global-header-nav-toggle
                c header !important // counter-i!
                &:hover, &[aria-expanded="true"], &:focus
                    headerHoverStyle()
                    c headerHover !important // override counter-i!
            .btn.btn-empty.global-header-icon.global-header-nav-toggle
                path
                    fill headerColor
                &:hover path
                    fill headerHoverColor           
            button.btn.global-header-site-selector
                border-radius headerHoverRadius     
                padding 7px 9px

            /* === search === */
            .global-header-nav-search
                .global-header-nav-search-inner
                    bg body
                .global-header-nav-search-advanced
                    bg menu
                    span.btn
                        bg menu
                    a:hover
                        headerHoverStyle()

            /* === geekmail === */
            geekmail-notifications a.global-header-icon
                border-radius headerHoverRadius
                padding 4px 7px
            subscription-notifications span a.global-header-icon
                border-radius headerHoverRadius
                padding 5px 7px 3px 7px
            a.global-header-icon span.badge, button.btn.global-header-icon span.badge
                background-color alarmColor
                if dark(alarmColor)
                    color white
                else
                    color black
                
            /* === NEXT button === */
            a.global-header-user-notification-action
                border none
                border-radius headerHoverRadius
                padding 3px 5px
                font-family fontM !important
                font-size fontSizeM !important
                font-weight 700
            .ui-select-bootstrap .ui-select-choices-row.active > a
                headerStyle()
            if siteSelectorHide
                button.global-header-site-selector
                    display none

        /* ==== body ==== */
        .global-body-content, footer.global-footer
            bg content

        .summary-item-tag a, .summary-item-pagination.pagination > li > a, .summary-item-pagination.pagination > li > span, .summary-file-type a
            textStyle()
        .btn-success
            background-color positiveColor
        .global-header-nav-search-advanced a:hover
            bg module

        /* === front page === */
        /* == columns == */
        @media screen and (min-width:769px)
            if columns != 2
                .geekcentral_leftcol
                    flex 1 1 (100/columns)%
                    max-width (100/columns)%
                .geekcentral_rightcol
                    flex 1 1 (100 - 100/columns)%
                    max-width (100 - 100/columns)%
                    column-count (columns - 1)
                    column-gap 10px
                .geekcentral_rightcol > .geekcentral_module
                    break-inside avoid
        .global-body-content-primary
            bg content
        ul.geekcentral-controls
            bg module
            border moduleBorder
        if frontpageCondensed
            .media-cell
                padding 2px 4px 2px 4px
            .media-cell__subtitle
                margin 0px 0 0 0

        /* == metadata == */
        .post-meta
            overflow visible
        if metadataInline
            if not titleTruncation      
                .media-cell
                    overflow auto
                h2.media-cell__title, p.media-cell__subtitle
                    display inline
                    line-height fontSizeL
                p.media-cell__subtitle
                    margin 3px 0 0 5px
                .post-meta, .post-reactions
                    float right
            if titleTruncation
                .media-cell
                    display flex
                    justify-content space-between
                p.media-cell__subtitle
                    align-self flex-end
                    margin-left 5px
        if metadataForumHide
            .geekcentral_module span.post-meta__item:nth-last-child(3)
                display none
                ::after
                    display none
        if metadataAuthorHide
            .geekcentral_module span.post-meta__item:nth-last-child(2)
                display none
                ::after
                    display none
        if metadataReactionsHide
            .geekcentral_module span.post-reactions, .geekcentral_module span.post-meta__item:nth-last-child(2)::after
                display:none
        .media-cell
            border menuBorder
            border-top none
        .media-header
            headerStyle()
        h1.media-header__title, .media-module .dropdown .dropdown-toggle, .module-pager .module-pager__arrow, .module-pager 
            c header

        /* == zebra striped modules == */
        .geekcentral
            .media-module
                .media-cell:nth-child(2n)
                    bg fp2n
                .media-cell:nth-child(2n+1)
                    bg fp2n1

        /* === sidebar === */
        if quickbarSticky
            .global-body-content-container .global-secondary-nav
                position sticky
                top 72px
        .global-secondary-nav-section
            .global-secondary-nav-section-header.toggler-caret
                headerStyle()
                &:hover
                    headerHoverStyle()
            .toggler-caret-target, .geeksidebar-section-body
                padding 0.2em 0
                bg module
            ul.global-secondary-nav-links > li
                border-color bodyBgColor
            .quickbar-list-group
                margin-bottom -5px
            .quickbar-pagination button.btn:hover, a:hover .quickbar-icon, div.quickbar-list-groups .btn.btn-empty:hover
                c linkHover
            /* row hover */
            div.quickbar-header
                padding 0 0.5em
            .quickbar-list li
                min-height 1.7em
            li
                padding 0.15em 0.5em
            li
                a, &
                    &:hover
                        buttonHoverStyle()
        
        /* === hidden modules === */
        if editHomepageHide
            .geekcentral-controls
                display none
        if announcementHide
            .geekcentral_module.leftcol:nth-child(2)
                display none
        if contestHide
            .geekcentral_module.leftcol:nth-child(3)
                display none
        if geekpreviewHide
            .geekcentral_module > center > a[href*="/geekpreview"]
                display none
            .geekcentral_module.rightcol:nth-child(-n+3)
                margin-bottom 0px
                #dfp-medrect-reserved-home, #dfp-medrect
                    display none

        /* === panels === */
        .panel-default > .panel-heading, .panel-primary > .panel-heading
            headerStyle()
            border moduleBorder

        /* === fonts === */
        /* AngularJS only, Angular 8 rem */
        .game-header-title-info h1
            font-family fontXXL     
            font-size fontSizeXXL       
        h2, .panel-header-lg .panel-title, .navbar-brand
            font-family fontXL      
            font-size fontSizeXL        
        h3, h5, .h5, .btn.btn-sm, .btn-group-sm > .btn, .global-header-nav-primary .dropdown-toggle, .global-header-nav-primary button.btn, .global-header-nav-primary a.btn, .global-header-site-selector, .global-header-nav-primary .dropdown-menu li a, .form-control, .game-year, .game-header-title-summary, .credits ul li, .rating-stars-title, .gameplay-item-primary, .quotetitle, .quote, .geekcentral-controls__item, h2.media-cell__title, .nav.nav-tabs > li > a, .game-marketplace, .summary-video-item > div, ul.list-block-border > li > a
            font-size fontSizeL
        h4, .panel-header-sm .panel-title, .fs-responsive-sm, .game-classification, .summary-item-description > *, .summary-item-counts > *, .summary-item-meta, .summary-item-meta > *, .summary-item-actions > *, .summary-item-actions-below > *, .global-footer p, .condition-label, .pagination-sm > li > a, .pagination-sm > li > span, .badge, a.tag, .avatarblock, p.media-cell__subtitle, .quickbar-header button.btn, .quickbar-icon, ul.global-secondary-nav-links > li, .game-header-flags, .gameplay-item-secondary, .game-itemid, .btn-xs, .btn-group-xs > .btn, button.global-header-user-notification-action
            font-family fontM
            font-size fontSizeM
        .global-secondary-nav-section-header, .global-secondary-nav-section-header.toggler-caret, .hotness-item-title, .text-domain, .summary-item-tag a, .summary-media-grid-count, .summary-item-pagination.pagination > li > a, .summary-item-pagination.pagination > li > span, .summary-file .summary-file-type a
            font-family fontS
            font-size fontSizeS
        .glyphicon
            font-family "Glyphicons Halflings"

        /* === text-colors === */
        h1, h2, h3, h4, h5, h6, p, .dropdown-header, .panel-heading, .text-muted, .summary-sale-item-price
            textStyle()
        .text-muted:not(label)
            filter opacity(60%)

        /* === front page modules & links === */
        .geekcentral-controls
            button, .link-text-color:link
                c fpLink
                &.btn.btn-empty:hover
                    c linkHover             
            .dropdown-menu > li > button.btn:hover
                buttonHoverStyle()
                c headerHover !important
        
        /* == modules == */
        .geekcentral_module
            ul.global-secondary-nav-links a, .link-text-color, .link-text-color:link, .quickbar a.ng-binding
                c fpLink
            .link-text:link, ul.global-secondary-nav-links a, .link-text-color, .link-text-color:link, .quickbar a.ng-binding, a.post-meta__link
                &:hover
                    c linkHover
            .link-text-color:visited
                c fpLinkVisited
            .link-text-color, .link-text-color:link, a.ng-binding, li.ng-binding a
                font-weight fpLinkWeight
            a.post-meta__link, a.post-meta__link:visited
                c metadata

            /* buttons & dropdowns */
            .media-module
                .dropdown
                    .dropdown-toggle
                        c header !important // counter-i!
                        &:hover, &[aria-expanded="true"]
                            buttonHoverStyle()
                            c buttonHover !important // counter-i!
                            margin -4px
                            padding 4px
                            
                    /* dropdown menus */
                    .dropdown-menu > li > button.btn:hover
                        buttonHoverStyle()
                .module-pager .module-pager__arrow:not(.disabled):hover
                    buttonHoverStyle()
                    margin 5px
                    padding 5px
                .media-filters
                    headerStyle()
                    .media-link
                        c headerLink !important
                        padding 5px
                        &:hover
                            buttonHoverStyle()
                            c buttonHover !important // counter-i!
                .media-grid
                    border-color moduleBorderColor
        /* === /front page modules & links === */

        /* === zebra striped tables === */
        table.salesreport tr.odd, .table-striped tr:nth-child(2n), .table-condensed tr:nth-child(2n), div.wrapper tr:nth-child(2n), .collection_table > tbody > tr:nth-child(2n), tr[bgcolor="#FFFFFF"]
            bg table2n !important
        table.salesreport tr.even, .table-striped tr:nth-child(2n+1), .table-striped > tbody > tr:nth-child(2n+1) > th, .table-striped > tbody > tr:nth-child(2n+1) > td , .table-condensed tr:nth-child(2n+1), div.wrapper tr:nth-child(2n+1), .collection_table > tbody > tr:nth-child(2n+1), tr[bgcolor="#ECEDEE"]
            bg table2n1

        /* === geekmarket === */
        div[ng-controller="GeekMarketCtrl"]
            .white-bg
                bg module
            nav.navbar-static-side li.active, .panel-primary, .dropdown-menu
                bg menu
            nav.navbar-static-side  li > a:hover
                headerHoverStyle()
            nav.navbar-static-side li.active > a
                c linkSelected
            .table-bordered tbody tr td, .table-bordered tbody tr th, .dropdown-menu
                border menuBorder
            div.panel-heading
                border none
            div#confirm div.modal-header
                headerStyle()
                border none

        /* === game pages === */
        /* == hidden modules == */
        if promotedVideoHide
            promotedvideos-module
                display none
        if recommendationsHide
            reviews-module + div.panel
                display none
                
        /* == mobile == */
        .game-nav-tabs .nav.nav-tabs > li > a, .game-nav-tabs .nav.nav-tabs > li.active > a
            textStyle()
            &:hover
                buttonHoverStyle()
        @media (max-width:767px)
            .game-header-body
                background-color #0a090f
                
        /* == header == */
        .game-header, .game-header-flags a:not(.btn):link, .game-header-title-info h1 a:not(.btn):link, .game-header-title-info h1 a:not(.btn):visited, .game-header-title-info h1 a:not(.btn):hover, .game-header-title-info h1 a:not(.btn):focus, .game-year, .game-header-title a:not(.btn):link, .gameplay-item-primary, .gameplay-item .btn:not(.btn-empty), .game-header-credits a:not(.btn):link, .game-header-credits a.ng-binding, .game-header-credits .credits-cta.ng-scope a, .gameplay-item .glyphicon.glyphicon-question-sign
            c gamepageHeader
        .game-header-title-rating a.rating-angular
            color #ddd !important
            
        /* == hover colors == */
        .btn-primary:hover
            buttonHoverStyle()
        .btn-white:hover
            border-color buttonHoverBgColor !important // counter-i!
        .game-header-flags, .game-header-title .game-header-title-summary, .game-header-credits .credits-cta.ng-scope
            a:hover
                buttonHoverStyle()
                c buttonHover !important
        .gameplay-item .btn:not(.btn-empty):hover
            buttonHoverStyle()
        .gameplay-item .glyphicon.glyphicon-question-sign, .feature-title span.glyphicon, .feature-title [class^="fi-"], .feature-description [class^="fi-"], .feature-description span.glyphicon, a.btn.btn-xs.outline-item-icon i.fi-torsos-female-male
            &:hover
                c linkHover
        a i.fi-pencil.c-icon:hover
            c linkHover !important // counter-i!
            
        /* == navigation == */
        .game-nav-tabs
            bg content
        div.nav-tabs-more-dropdown
            a
                padding-left 5px
            a:hover
                /* padding-left 10px*/
                buttonHoverStyle()
                c headerHover !important
        .well
            bg menu !important
        .summary-border .summary-item
            border-color menuBorderColor
            
        /* == overview, images == */
        .summary-media-grid-count
            bg menu
            border menuBorder
            a
                c link
                &:hover 
                    c buttonHover
            &:hover
                buttonHoverStyle()
                
        /* === sections === */
        .panel-header-lg .panel-title, .wiki_angular h2, .wiki_angular h3
            textStyle()
        .panel-header-lg .panel-title > a:link
            c link
            &:hover
                c linkHover
                
        /* == zebra style == */
        ul.summary > li.summary-item
            margin-bottom 0
            padding-top 0.2em
            padding-right 0.2em
            &:nth-child(2n)
                bg table2n
            &:nth-child(2n+1)
                bg table2n1
            &:last-child
                border-bottom none
                
        /* == description == */
        .game-awards.panel li a, .panel-expandable .expandable-body a
            &:link
                border-bottom none
                c link
                linkStyle()
            &:hover
                c linkHover
        .text-domain:hover
            c linkHover !important // counter-i!
            
        /* == buy a copy == */
        ul.summary-sale > li.summary-sale-item
            padding 0.2em 0.5em
            margin-bottom 0 !important // counter-i!
            
        /* == geekmarket == */
        .panel-inline-links > a:link:not(.btn):hover
            c linkHover
            
        /* == videos, reviews == */
        .summary-item-meta
            a:hover
                c linkHover     
            .summary-item-tag a:hover
                buttonHoverStyle()
        .summary-item-counts:hover .summary-item-counts-item
            c linkHover
            
        /* == forum == */
        /* navigation */
        ul.nav.nav-pills
            > li
                textStyle()
                .active > a .glyphicon-chevron-right
                    c linkSelected
                > a:hover, > a:hover .glyphicon-chevron-right
                    c linkHover
                > a .nav-pills-count
                    textStyle()
            li.nav-header
                textStyle()
            > li > a
                textStyle()
        .panel-header-actions
            a:not(.btn), a.is-active
                &:hover
                    c linkHover !important // counter-i!
        /* threads */
        forum-threads
            bg module
            ul.summary
                > li.summary-item:nth-child(2n)
                    bg table2n
                    > a
                        bg table2n
                    ul.pagination a, ul.pagination span, .summary-item-tag a
                        bg table2n1
                        border-radius 2px
                > li.summary-item:nth-child(2n+1)
                    bg table2n1
                    > a
                        bg table2n1
                    ul.pagination a, ul.pagination span, .summary-item-tag a
                        bg table2n
                        border-radius 2px
                .summary-item-counts:hover .summary-item-counts-item
                    c linkHover
                .summary-item-title a:visited
                    c linkVisited
                ul.summary-item-pagination.pagination > li > a
                    &:link              
                        c link
                    &:visited
                        c linkVisited
                    &:hover
                        buttonHoverStyle()
                li.summary-item .summary-item-meta > .summary-item-tag > a
                    &:hover
                        buttonHoverStyle()
                        
        /* == files == */
        .summary-file-type a:hover
            buttonHoverStyle()
            
        /* == more == */
        ul.list-block-border > li
            border-color moduleBorderColor
            padding 0 0.5em
            &:nth-child(2n)
                bg table2n
            &:nth-child(2n+1)
                bg table2n1
        .game-more > li > a::after
            c link
            
        /* == geeklists == */
        .summary-item-geeklist
            border-color moduleBorderColor
            &:hover
                border-color linkHoverColor
                .summary-item-title
                    c linkHover

        /* === geekpreview === */
        .geekpreview-header, .geekpreview-header-info, .geekpreview-header h1
            c gamepageHeader
            p, .text-muted
                c gamepageHeader !important
        .geekpreview-sticky-menu
            headerStyle()
        .geekpreview-toolbar-primary-search form input.form-control
            inputStyle()
        .geekpreview-item-inner-info-header-title h3 span, dl.geekpreview-item-inline-summary dt, .geekpreview-item-publisher
            textStyle()
            a
                c link
        div.geekpreview-item-inner-info-header p.text-muted a
            c link
        .geekpreview-parent
            headerStyle()
            border none
        .geekpreview-parent-info h2 a, .geekpreview-parent-social .btn, .geekpreview-parent-info a
            c headerLink
        .c-green-600
            c positive !important

        /* === modal dialog === */
        .modal .modal-dialog
            .modal-header
                headerStyle()
                border none
                button.close:hover
                    c alarm
                .modal-title, button.close
                    c header
            .modal-body, .modal-footer
                bg module
                ul.list-group .list-group-item
                    bg menu
            .modal-footer
                border-top moduleBorder
            .panel-title
                textStyle()
        
        /* === mobile === */
        .has-mobile-nav
            .global-header-nav-primary-wrapper
                bg body
                ul.global-header-nav-primary
                    bg module
                    textStyle()
                    button.btn
                        textStyle() !important
                li.dropdown
                    border-color moduleBorderColor
            .global-secondary-nav-section-header
                headerStyle()
        div.global-header-nav-mobile-links button.global-header-icon
            c header
    /* ===== /angularjs pages ===== */

    /* ===== LEGACY PAGES ===== */
    .legacy
        bg content
        textStyle()
        
        /* === modules === */
        .moduletable th, .bggstore_widget_controls, .geekcollection_pager, .menu_noquickbar_bottom, .hotitems th, .bg-red th, .bg-blue th, .profile_table th, .menu_table, .tabOn, .tabOff, .geekmail_header, div.recommendbox_str, .searchbox_header
            headerStyle()
        .moduletable
            border moduleBorder
        .pages a
            border-color headerColor
        .pages a:hover, .pages a:active
            border-color linkHoverColor
        .module_title, td.module_title + td > div a, td.modulecommands + td > div, td.modulecommands + td > div > a, .moduletable th a, .moduletable div.pages, .moduletable > tbody > tr:first-child, .moduletable .modulecommands, .modulecommands select, .modulecommands option, div.pages
            c header
            
        /* === forum === */
        .forum_index_table th a
            c headerLink !important
        .forum_table th, .forum_index_table th
            c header
        .forum_table td, .forum_index_table td
            textStyle()
            bg module
            border-color moduleBorderColor
        .forum_table, .forum_index_table
            border-spacing 0
            border moduleBorder
            tr:nth-child(2n), tr:nth-child(2n) > td
                bg table2n
            tr:nth-child(2n+1), tr:nth-child(2n+1) > td
                bg table2n1
        /* border fix */
        /*.forum_table
            background-color moduleBorderColor
        */
        .moduletable
            border-spacing 0
            border moduleBorder
            tr.moduleRow:nth-child(2n)
                bg table2n
            tr.moduleRow:nth-child(2n+1)
                bg table2n1
                
        /* === quickbar edit === */
        form[action="/quickbar.php"]
            .forum_table tr:nth-child(2n), .forum_table tr:nth-child(2n) > td
                bg table2n !important
            .forum_table tr:nth-child(2n+1), .forum_table tr:nth-child(2n+1) > td
                bg table2n1 !important
        .infobox, .messagebox, .geekpoll, .popupbox, .bluebox, .whitebox, button, input, optgroup, select
            textStyle()
        div.article dl
            border-color moduleBorderColor
        div.article dd.right, div.article dd.doubleright, div.article dd.commands, div.article dd.doublecommands
            border-left moduleBorder
        div.article dd.left
            border-right moduleBorder
        /* right border fix */
        div.recommendbox_str
            width 104px
        ul.commands li.divider
            background-color moduleBorderColor
        .post_numcomments, .dull, .darkgray, div.header
            textStyle()
        div.article.subbed
            border articleNewBorder
        div.article.selected, div.article.subbed_selected
            border articleSelectedBorder
        .quotetitle
            bg quoteTitle
            c quoteTitle
        .quote
            bg quote
            border quoteBorder
            border-top none
            c quote
            
        /* === links === */
        a:visited
            c linkVisited
        a, a:link, .nav > li > a, .bluebox a
            c link
            &:hover
                c linkHover
                transition none
        .geeksub_minorlink a:hover
            c linkHover
        .menutab-open li a:hover, .geeksub_minorlink a:active
            c linkHover
        .comment_button
            border-color linkColor
            background-color buttonBgColor
            &:hover
                buttonHoverStyle()
        a, a:link
            linkStyle()
        .forumlink, .objectlink
            a:visited, a:link, a:hover, a:active
                textStyle()
                
        /* === overtext / popup === */
        .location, js-location, .js-badgeovertext, .avatarovertext
            bg menu
            textStyle()
            
        /* === text color === */
        .error, text-danger
            c alarm
        .positive, .positive a, .storepositive, .storeprice, .price, .text-success
            c positive
            
        /* === fonts === */
        div.recommend_block dl.recommend *, .post_day
            font-family fontXXL !important
            font-size fontSizeXXL !important
        h1, .module_title, .profile_title, .gallery_title, span[style*="20px"], .geeklist_item_title, .post_month, .forum_path, .lf, table.lf td, div.recommend_block dl.recommend dt.tippersbig a
            font-family fontXL !important
            font-size fontSizeXL !important
        .moduletable th, .innermoduletable th, .itemmoduletable th, .innermoduletable td, #container, textarea, select, input, .geekinput, .table, .post_year, .mf, table.mf td, .quotetitle, .quote
            font-family fontL !important
            font-size fontSizeL !important
        .objectlink > a, .forumlink > a, .modulecommands, .pager, .sf, table.sf td, .post_numcomments, .smallerfont, .tabOn, .tabOff, .geekmail_header, .gm_date, .collection_table td, .owned, .wanted, .fortrade, .wishlist, .prevowned, .wanttoplay, .rating span, .ratingtext, #blog_description, .post_categories ul li, .post_nlinks ul li, .dropdown-header, .geekinput_medium, div.wikitoc, a.tag, .avatarblock
            font-family fontM !important
            font-size fontSizeM !important
        .geekpages, .pages, .comment_button, .comment_button_disabled, .gallery_caption, .tagbar-inner, .post_author, .post_controls, .post_tstamp, div[style*="9pt"], div.recommendbox_str
            font-family fontS !important
            font-size fontSizeS !important
            
        /* === backgrounds === */
        .mainmenutabs, .menu_login, .menu_quickbar, .profile_block, table#collectionitems, div.global-body-content > div, div.header , div.article, .blog_post, .bluebox
            bg module
        .messagebox, .popupbox, .infobox, .whitebox, div.recommend_block, div.wikitoc, .img-thumbnail, .menutab-open, .mainmenutabs li a.open, .submenutabs li a.open, .post_numcomments, .post_nlinks ul li a, div.geeksub_pulldown_body
            bg menu
        .menu_login,  .messagebox, .popupbox, .infobox, .whitebox, .bluebox, .errorbox, .warningbox, .greenbox, div.header, div.recommend_block, div.article, div.comment_toolbar, .post_numcomments, .post_categories ul li a, .post_nlinks ul li a, div.geeksub_pulldown_body
            border menuBorder
            
        /* === input, select === */
        input:not([type="button"]), .geekinput, .geekinput_medium, .geekinput_large, select
            inputStyle()
        input[type="button"], .geekinput
            font-size fontSizeL !important
            font-weight 600
        .post_numcomments::after, .post_numcomments::before
            border-color transparent moduleBorderColor
            border-right-color moduleBorderColor
            
        /* === geeklists === */
        .geeklist_title, .geeklist_item_title
            headerStyle()
            a
                c headerLink
                &:hover
                    c linkHover
        .comment_toolbar
            headerStyle()
        .geeklist_title, .blog_post
            border moduleBorder
        .geeklist_item_title
            border-color moduleBorderColor
        #header
            border-top menuBorder
        .infobox
            bg module
            border moduleBorder
            
        /* === geekmail === */
        tr:first-child > td.sf > div.sf, .gm_controlbar, div#pager.geekpages, div#mychecks
            bg module !important
            border moduleBorder !important
        table.gm_messages:nth-child(2n) tr
            bg table2n1 !important
        table.gm_messages:nth-child(2n+1) tr
            bg table2n !important
        div#mychecks > table > tbody > tr
            border 0px !important
            border-color moduleBorderColor
        td.sf div[style*="background-color"]
            bg body !important
            
        /* === polls === */
        .outerpoll
            bg module   
        .geekpoll
            th
                headerStyle()
            tr th.questiontext
                background-color transparent
                textStyle()
            th.header, tfoot > tr, tr.columnlabel, th.questiontext
                bg menu !important
            tr:nth-child(2n) 
                bg table2n
            tr:nth-child(2n+1) 
                bg table2n1
        .pollresults
            th, tfoot > tr > * 
                bg menu !important
            tr:nth-child(2n) td
                bg table2n
            tr:nth-child(2n+1) td
                bg table2n1
                
        /* === blog === */
        #blog_header, #blog_nav h2
            headerStyle()
        #blog_title a
            c headerLink
        #blog_nav > div > *:nth-child(2)
            textStyle()
            bg module
            border moduleBorder
            
        /* === user profile === */
        .tabOn
            headerHoverStyle()
        .tabOff a:link, .profile_title a 
            c headerLink
        .tabOff, .tabOn
            a
                padding 4px 10px
            a:hover
                headerHoverStyle()
        .tabOn a:link
                headerHoverStyle()
                c headerHover !important
                linkStyle()
        .profile_block
            textStyle()
        div.profile_title
            headerStyle()
            padding-left 5px
            
        /* === collection === */
        .collectionfilter_commandbar
            headerStyle()
        .collectionfilter_body
            bg menu
        .geekcollection_pager a
            c headerLink
        table.collection_table > tbody > tr:first-child
            headerStyle()
            th 
                c header
                a
                    c headerLink
                    &:hover
                        headerHoverStyle()
                        c headerHover !important
        .collection_table td
            padding 2px
        .collection_version
            white-space normal
        .editfield:hover
            buttonHoverStyle()
            
        /* === subscription icon === */
        if nextChange       
            img.i_silk_newspaper_go_gray, img.i_silk_newspaper_go
                display none
            .subsicon::after
                c nextIcon
                content "\f" + nextIconUnicode
                font-family FontAwesome
                font-size nextIconSize
            /* scale old icon
            .subsicon > img
                transform:scale(1.5)
            */
            
        /* === tags === */
        div.tagouter
            bg module
            
        /* === plays === */
        table.forum_table > tbody > tr > th
            headerStyle()
            a
                c headerLink !important // counter-i
                padding 1px 3px
                &:hover
                    headerHoverStyle()
                    c headerHover !important // counter-i!
        form[action="/geekplay.php"] .forum_table td
            border none
        input[type="submit"]
            border-radius buttonHoverRadius
            &:hover
                buttonHoverStyle()